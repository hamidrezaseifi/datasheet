{% extends 'global/base.html' %}

{% block title %}{{ model_name }} Liste{% endblock %}

{% block content %}

<form>
    <input type="hidden" id="idToDelete" name="idToDelete">
    <input type="hidden" id="urlToDelete" name="urlToDelete">
    <input type="hidden" id="nameToDelete" name="nameToDelete" value="{{ model_name }}">
</form>

<h1>{{ model_name }} Liste</h1>
<h5>Total: {{ total }}</h5>

<br>

<div id="toolbar">
  <a href="/{{base_url}}/data" class="btn btn-primary">
      Neue {{ model_name }} &nbsp; &nbsp;<i class="bi bi-plus-square"></i>
    </a>
  <div style="display: inline-block; margin-left: 30px;">
        <div class="row g-3 align-items-center">
          <div class="col-auto">
            <label for="pageSize" class="col-form-label">Page Size</label>
          </div>
          <div class="col-auto">
            <select id="pageSize" onchange="window.location.href='?count=' + this.value;" class="form-select form-control" aria-label="Default select example">
              <option {% if item_count == 15 %} selected {% endif %} value="15">15</option>
              <option {% if item_count == 25 %} selected {% endif %} value="25">25</option>
              <option {% if item_count == 500 %} selected {% endif %} value="50">50</option>
              <option {% if item_count == 100 %} selected {% endif %} value="100">100</option>
            </select>

          </div>
        </div>
    </div>

  <nav style="display: inline-block; margin-left: 30px;">
      <ul class="pagination">
        <li class="page-item disabled">
          <span class="page-link">Pages</span>
        </li>
          {% for page_idx in page_list %}

        <li class="page-item{% if page_idx == page_index %} active{% endif %}"><a class="page-link" href="?count={{item_count}}&page={{page_idx}}{% if sort_col %}&sort_col={{sort_col}}{% endif %}{% if sort_type %}&sort_type={{sort_type}}{% endif %}">{{page_idx}}</a></li>

           {% endfor %}
        <li class="page-item disabled">
          <span class="page-link pages-details">{{page_index}} of {{page_count}}</span>
        </li>


      </ul>
    </nav>
</div>

<table class="table data-table" id="data-table">
  <thead class="thead-dark">
    <tr>
     {% for column in columns %}
        <th scope="col">
            {% if sort_col == column %}
            <span style="display: inline-block">{{ column }}</span>
            {% endif %}
            {% if sort_col != column %}
            <span style="display: inline-block"><a href="?count={{item_count}}&page={{page_index}}&sort_col={{ column }}&sort_type=asc">{{ column }}</a></span>
            {% endif %}

            <span class="column-detail-part">
                <i class="bi bi-funnel"></i>
                {% if sort_col == column %}
                {% if sort_type == 'asc' %}
                <a href="?count={{item_count}}&page={{page_index}}&sort_col={{ column }}&sort_type=desc"><i class="bi bi-arrow-up"></i></a>
                {% endif %}
                {% if sort_type == 'desc' %}
                <a href="?count={{item_count}}&page={{page_index}}&sort_col={{ column }}&sort_type=asc"><i class="bi bi-arrow-down"></i></a>
                {% endif %}
                {% endif %}

            </span>
        </th>
      {% endfor %}
        <th scope="col">...</th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
    <tr>
      {% for col,val in item.items %}
        {% if col != '_dj_pk' %}
      <td>{{ val}}</td>
        {% endif %}
        {% if col == '_dj_pk' %}
      <td style="width: 120px;">
         <a href="/{{base_url}}/data/{{val}}" class="btn btn-sm btn-outline-primary ms-2">
             <i class="bi bi-pencil-fill"></i>
          </a>
          <button class="btn btn-sm btn-outline-danger ms-2" onclick="deleteItem('/{{base_url}}/delete', '{{val}}', '{{ model_name }}')">
              <i class="bi bi-trash"></i>

          </button>

      </td>
        {% endif %}
      {% endfor %}
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="modal" id="deleteModel" tabindex="-1" role="dialog">
    <div class="modal-dialog  modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Löschen ...</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" id="deleteModelBody">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" onclick="closeDeleteModal()">
            Abbrechen &nbsp; &nbsp;<i class="bi bi-x-square"></i>
        </button>
        <button type="button" class="btn btn-danger" onclick="doDeleteItem()">
              Löschen &nbsp; &nbsp;<i class="bi bi-trash"></i>
        </button>
      </div>
    </div>
  </div>
</div>

<script>

</script>

{% endblock %}