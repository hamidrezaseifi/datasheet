{% extends 'global/base.html' %}
{% load i18n %}

{% block title %}{{ model_name }} {% if instance %}bearbeiten{% else %}erstellen{% endif %}{% endblock %}

{% block content %}
<h1>{{ model_name }} {% if instance %}bearbeiten{% else %}erstellen{% endif %}</h1>

{% if messages %}
<div class="messages">
    {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
</div>
{% endif %}

<form method="POST" class="mt-4 data-form">
    {% csrf_token %}
    {{ form.as_p }}
    {% if form.errors %}
        <div class="alert alert-danger">
            {% for field, errors in form.errors.items %}
                {% for error in errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            {% endfor %}
        </div>
    {% endif %}
    <button type="submit" class="btn btn-success">
       {% trans 'Speichern' %}

        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-floppy" viewBox="0 0 16 16">
          <path d="M11 2H9v3h2z"/>
          <path d="M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z"/>
        </svg>
    </button>
<!--    <a href="/{{base_url}}/list" class="btn btn-secondary">-->
    <a href="{{ return_url|default:'/' }}" class="btn btn-secondary">
        {% trans 'Abbrechen' %}

        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-square" viewBox="0 0 16 16">
          <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
          <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
        </svg>
    </a>

</form>


<!--    <script>-->

<!--{% if model_name == 'Prognose' %}-->
<!--        var objects = {};-->
<!--        {% for obj, sort in extrac_data.objects.items %}-->
<!--        objects['{{obj | safe}}'] = {{sort}};-->
<!--        {% endfor %}-->
<!--{% endif %}-->


<!--      $(document).ready(function() {-->
<!--      {% if select2_fields %}-->
<!--        {% for field, search_url in select2_fields.items %}-->
<!--          $('#id_{{ field }}').select2({-->
<!--            placeholder: "{% trans 'AuswÃ¤hlen' %}",-->
<!--            allowClear: true,-->
<!--            width: '100%',-->
<!--            ajax: {-->
<!--              url: "{{ search_url }}",-->
<!--              dataType: 'json',-->
<!--              delay: 250,-->
<!--              data: function(params) {-->
<!--                return { q: params.term || '' };-->
<!--              },-->
<!--              processResults: function(data) {-->
<!--                return {-->
<!--                  results: data.results || [],-->
<!--                  pagination: { more: data.pagination ? data.pagination.more : false }-->
<!--                };-->
<!--              },-->
<!--              cache: true-->
<!--            },-->
<!--            minimumInputLength: 2,-->
<!--            language: {-->
<!--              noResults: function() { return "{% trans 'Keine Ergebnisse gefunden' %}"; },-->
<!--              searching: function() { return "{% trans 'Suche...' %}"; }-->
<!--            }-->
<!--          });-->
<!--        {% endfor %}-->
<!--    {% endif %}-->

<!--      });-->

<!--{% if model_name == 'Prognose' %}-->

<!--       function objekt_changed() {-->

<!--            $("#id_sortierreihen_folge").val(objects[$("#id_objekt").val()]);-->

<!--        }-->
<!--{% endif %}-->

<!--    </script>-->

{% endblock %}



